!function(t){var e=t.module("app",["ui.router"]);e.controller("AppController",["$scope","$window",function(t,e){t.appTitle="webApp",t.title="首页",t.index=0,t.$on("tab_notifice",function(e,i){var l=["首页","作者","栏目","我"];t.title=l[i.index],t.index=i.index}),t.back=function(){e.history.back()}}]),e.directive("navs",function(){return{restrict:"EA",templateUrl:"../views/nav_tpl.html",link:function(t,e,i){"true"!=i.isBack&&e.find("span").css({display:"none"})}}}),e.directive("tabbar",function(){return{restrict:"EA",templateUrl:"../views/tabbar_tpl.html",link:function(t,e,i){},controller:function(t){t.tabChange=function(e){t.$emit("tab_notifice",{index:e})}}}}),e.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("index",{url:"/index",views:{home:{templateUrl:"../views/home_tpl.html",controller:"HomeController"},author:{template:"<h2>author</h2>"},content:{template:"<h2>content</h2>"},my:{template:"<h2>my</h2>"}}}).state("index.list",{url:"/list",templateUrl:"../views/list_tpl.html"}).state("index.detail",{url:"/detail/:id",template:"<detail></detail>",controller:"DetailController"}),e.otherwise("index/list")}]),e.controller("HomeController",["$scope","$http",function(t,e){e({url:"http://localhost/api/home.php",method:"jsonp"}).then(function(e){console.log(e),t.listData=e.data}).catch(function(t){console.log(t)})}]),e.controller("DetailController",["$scope","$stateParams",function(t,e){var i=e.id;t.item=t.listData.posts[i]}]),e.directive("detail",function(){return{restrict:"EA",replace:!0,template:'<div class="list_detail"></div>',link:function(t,e,i){e.html(t.item.content)}}}),e.config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://localhost/api/**"])}])}(angular);